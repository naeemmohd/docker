<span style="text-decoration: underline;"><strong>What is Docker?</strong></span>
<ul>
	<li>As per the docker documentation -
<ul>
	<li><strong>Docker:</strong>
<ul>
	<li>is a platform to <strong>develop</strong>, <strong>deploy</strong> and <strong>run</strong> application using a concept called as containerization.</li>
</ul>
</li>
	<li><strong>Containerization:</strong>
<ul>
	<li>uses images and containers which Scalable, Portable, Flexible, Lightweight, Stackable, Interchangeable making software development, deployment(CI-CD i.e. Continuous Integration and Continuous Delivery) and execution of application seamless</li>
</ul>
</li>
	<li><strong>Images:</strong>
<ul>
	<li>are executable packages which contains the everything to run an application - the code, run-time, libraries or dependencies,  configuration files, environmental variables.</li>
</ul>
</li>
	<li><strong>Containers:</strong>
<ul>
	<li>are the run-time instances of the image which runs in a docker environment.</li>
	<li>It means that containers have a state and they run in memory while images are the blueprints. The analogy can be similar to a class and its objects.</li>
	<li>If use the <strong>ps</strong> command - docker ps - you can see a container running as a process on the docker host.</li>
</ul>
</li>
</ul>
</li>
</ul>
<span style="text-decoration: underline;"><strong>Docker Vs Virtual Machines(VMs)</strong></span>
<ul>
	<li>Please see this image snapshot to understand difference between docker and VM:</li>
	<li><strong>Virtual Machines(VMs):</strong>
<ul>
	<li>They use a full blown VM OS which uses resources more than it might need as each VM will have a definite defined memory, hard disk, network etc</li>
	<li>It uses a technology Hypervisor to abstract or simulate the host machines resources as memory, storage, CPU etc, that is why they VMs are slower to setup.</li>
</ul>
</li>
	<li><strong>Dockers:</strong>
<ul>
	<li>The container share the resources assigned to docker on the OS, so no container will use more resources than needed.</li>
	<li>Its lightweight as it does not use a fully blown OS.</li>
	<li>Faster to setup</li>
</ul>
</li>
	<li>Below is a snapshot clarify</li>
</ul>
<span style="text-decoration: underline;">What dockers can do for us?</span>
<ul>
	<li><strong>Scanario 1</strong> - Imagine you have to deploy a <strong>highly scalable</strong> and <strong>highly available</strong> website behind a <strong>load balancer</strong> with a fleet of multiple web servers , applications servers and database server. Imagine you have do the following
<ul>
	<li><strong>Manually Install</strong> all that is required:
<ul>
	<li>install the guest OS first e.g Linux, then Apache the web server, MySQL the database server, PHP or Python etc to process the application code.</li>
	<li>Imagine if you have to manually to do this on 100s or 1000s of server????????</li>
</ul>
</li>
	<li><strong>Automate</strong> using <strong>script </strong>
<ul>
	<li>write shell scripts to install Linux, Apache, MySQL, PHP or Python etc</li>
	<li>copy these scripts to the specific servers to execute on boot up.</li>
	<li>Imagine if you have to use scripts to do this on 100s or 1000s of server????????</li>
</ul>
</li>
	<li>Use an <strong>Orchestrator</strong> tool like D<strong>ocker</strong>, K<strong>ubernetes</strong> etc to do this for using a orchestration file. So now installing software, dependencies to run an application is not a tedious error prone activity but it has been now limited to the orchestration file. In Docker terms its is called a Dockerfile.</li>
</ul>
</li>
	<li><strong>Scanario 2</strong> - Now imagine you are constantly doing lot of changes and you have constantly deploy it to servers from scratch, you will have to download, install and configure everything from Linux, Apache, MySQL, PHP/Python. How will you manage if your company can't afford large down times also it will take lot of time
<ul>
	<li>In Docker world, docker uses images and containers and also uses caching and layered approach.</li>
	<li>It first searches for an image locally or from cache, if it does not find it then only it downloads it from repository(called a dockerhub)</li>
	<li>You can first pull the base image first (say for Linux), then build over it as containers where 1 container will hold 1 responsibility e.g a container will have database, another one the Apache, the third one your application code if we think of a 3 tier application.</li>
	<li>An image downloaded once is cached and can be used by multiple containers</li>
	<li>You can use orchestration tools like docker-compose, kubernetes to orchesrtate development, deployment and running of your application.</li>
</ul>
</li>
</ul>
<span style="text-decoration: underline;"><strong>Features and Architecture of Docker:</strong></span>
<ul>
	<li><strong>Features</strong>:
<ul>
	<li>Immutability - the images are immutable, they don't change unless you make changes and build and deploy another image</li>
	<li>Disposibility - images are disposable so that you can create another one after disposing curret one</li>
	<li>SRP(Single Responsibility Principle) - each image holds a single responsibility e.g. in a three tier application, it would be ideal to have 3 images to represent the front end , business layer and database layer</li>
</ul>
</li>
	<li><strong>Architecture</strong>:
<ul>
	<li>docker is essentially a client server architecture called as <strong>Docker Engine</strong>, where client and server can run on same machine or different machines</li>
	<li>Below is the snapshot  of a <strong>Docker Engine</strong>:</li>
	<li>

[caption id="attachment_1636" align="alignnone" width="658"]<img class="alignnone size-full wp-image-1636" src="https://mohdnaeem.files.wordpress.com/2018/04/capture1.png" alt="Capture" width="658" height="481" /> Source: <a href="https://docs.docker.com/engine/docker-overview/#docker-engine">https://docs.docker.com/engine/docker-overview/#docker-engine</a>[/caption]
<ul>
	<li><strong>Docker client</strong> -
<ul>
	<li>the client interacts with server to help execute the docker commands exposed by docker APIs</li>
	<li>E.g docker pull, docker pull, docker run etc</li>
</ul>
</li>
	<li><strong>Docker Daemon</strong>(server) -
<ul>
	<li>manages the docker objects - images and containers</li>
</ul>
</li>
	<li><strong>Docker registry</strong>(placeholder for repository)
<ul>
	<li>holds the images.</li>
	<li>Docker Hub and Docker Cloud are public docker registries</li>
</ul>
</li>
	<li>As per docker documentation website - the below is the architecture of docker

[caption id="attachment_1635" align="alignnone" width="1091"]<img class="alignnone size-full wp-image-1635" src="https://mohdnaeem.files.wordpress.com/2018/04/capture.png" alt="Capture" width="1091" height="569" /> Source: <a href="https://docs.docker.com/engine/docker-overview/#docker-architecture">https://docs.docker.com/engine/docker-overview/#docker-architecture</a>[/caption]</li>
</ul>
</li>
</ul>
</li>
</ul>
<strong>Docker Installation</strong>:
<ul>
	<li>Docker supports a community edition(<strong>Docker CE</strong>) and an enterprise edition(<strong>Docker EE</strong>) and supports platforms like Linux, Mac, Windows</li>
	<li><strong>Steps</strong> for <strong>Docker Installation</strong>:
<ul>
	<li>Login to your host(I am using CentOS Linux server as my host)</li>
	<li>Step 1 : <strong>Installation</strong> of <strong>pre-requisite</strong> packages:
<ul>
	<li>Docker needs yum-utils, device-mapper-persistent-data and lvm2 as prerequisites.</li>
	<li><strong>sudo yum install -y yum-utils</strong> <strong>device-mapper-persistent-data</strong> <strong>lvm2</strong></li>
	<li><img class="alignnone size-full wp-image-1637" src="https://mohdnaeem.files.wordpress.com/2018/04/capture2.png" alt="Capture" width="1413" height="221" /></li>
</ul>
</li>
	<li>Step 2 : <strong>Setting</strong> <strong>up</strong> Docker yum <strong>repository and install docker</strong>:
<ul>
	<li><strong>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</strong></li>
	<li><strong>sudo yum -y install docker-ce</strong></li>
	<li><img class="alignnone size-full wp-image-1638" src="https://mohdnaeem.files.wordpress.com/2018/04/capture3.png" alt="Capture" width="1808" height="287" /></li>
</ul>
</li>
	<li>Step 3 : <strong>Start</strong> Docker :
<ul>
	<li><strong>sudo systemctl start docker</strong></li>
	<li><strong>sudo systemctl enable docker</strong></li>
</ul>
</li>
	<li>Step 4 : <strong>Run</strong> Hello world to test docker installation
<ul>
	<li><strong>sudo docker run hello-world</strong></li>
	<li><img class="alignnone size-full wp-image-1639" src="https://mohdnaeem.files.wordpress.com/2018/04/capture4.png" alt="Capture" width="1852" height="935" /></li>
</ul>
</li>
</ul>
</li>
	<li><strong>Steps</strong> for <strong>Docker Uninstall:</strong>
<ul>
	<li><strong>sudo yum remove docker-ce </strong># uninstalls docker</li>
	<li><strong>sudo rm -rf /var/lib/docker  </strong># removes dicker folder</li>
</ul>
</li>
</ul>
<span style="text-decoration: underline;"><strong>Docker Commands:</strong></span>
<ul>
	<li>To check docker version(detailed client server info) : <strong>docker version</strong></li>
	<li>To check docker info(short info) : <strong>docker --version</strong></li>
	<li><img class="alignnone size-full wp-image-1641" src="https://mohdnaeem.files.wordpress.com/2018/04/capture5.png" alt="Capture" width="704" height="747" /></li>
	<li>To check docker info(detailed docker metadata info) : <strong>docker info</strong></li>
	<li><img class="alignnone size-full wp-image-1642" src="https://mohdnaeem.files.wordpress.com/2018/04/capture6.png" alt="Capture" width="1085" height="907" /></li>
	<li>To <strong>pull an image from Docker Hub</strong>:
<ul>
	<li>pull the <strong>latest image</strong> :
<ul>
	<li>to pull latest Ubuntu - <strong>docker pull ubuntu</strong></li>
	<li>to pull latest CentOS - <strong>docker pull centos</strong></li>
</ul>
</li>
	<li>pull the <strong>tagged image</strong>:
<ul>
	<li>to pull tagged Ubuntu - <strong>docker pull ubuntu:trusty</strong></li>
	<li>to pull tagged CentOS - <strong>docker pull centos:7</strong></li>
</ul>
</li>
</ul>
</li>
	<li>To <strong>create and run a container</strong>:
<ul>
	<li>To <strong>run</strong> the container in <strong>interactive</strong> mode:
<ul>
	<li>in interactive mode you are running the container in foreground</li>
	<li>its kind of sshing(not actually though)</li>
	<li>use <strong>exit</strong> to exit out of the container</li>
	<li><strong>docker run -it ubuntu bash</strong></li>
	<li><strong>docker run -it ubuntu ls</strong></li>
	<li>bash , ls are commands for the container</li>
	<li><img class="alignnone size-full wp-image-1644" src="https://mohdnaeem.files.wordpress.com/2018/04/capture7.png" alt="Capture" width="1554" height="941" /></li>
</ul>
</li>
	<li>To <strong>list</strong> all <strong>images</strong> - <strong>docker images</strong></li>
	<li>To <strong>list</strong> all <b>containers (active)</b>- <strong>docker container ls</strong>
<ul>
	<li>In snapshot below it returns no results as there is no active container running.</li>
	<li>When we will run ubuntu in detached mode, we will try this command again to see if it shows an active container</li>
</ul>
</li>
	<li>To <strong>list</strong> all containers<b> (container ID not truncated )</b>- <strong>docker container ls --no-trunc</strong></li>
	<li>To <strong>list</strong> all containers<b> (container ID only)</b>- <strong>docker container ls -q</strong></li>
	<li>Filter containers - <strong>docker container ls -a filter </strong>
<ul>
	<li>docker container ls -a filter "excited=0"</li>
	<li>docker container ls -a filter "excited=1"</li>
</ul>
</li>
	<li>To attach a container - <strong>docker container attach </strong>
<ul>
	<li>it similar to running a container in interactive mode.</li>
</ul>
</li>
	<li>To <strong>list</strong> all <b>containers (active and stopped)</b>- <strong>docker container ls -a</strong>
<ul>
	<li>it lists all containers including active and stopped once</li>
</ul>
</li>
	<li>to check the differential(delta of changes) between the original and modified container - <strong>docker container diff </strong></li>
	<li>to check image history - <strong>docker image history </strong></li>
	<li><img class="alignnone size-full wp-image-1645" src="https://mohdnaeem.files.wordpress.com/2018/04/capture8.png" alt="Capture" width="1896" height="624" /></li>
	<li>To <strong>run</strong> the container in <strong>detached</strong>(background) mode:
<ul>
	<li>in detached mode you are running the container in background</li>
	<li>extra switch -d for detached mode</li>
	<li><strong>docker run -it -d ubuntu bash</strong></li>
	<li><strong>docker run -it -d ubuntu ls</strong></li>
	<li>bash , ls are commands for the container</li>
	<li>you will then use docker exec command to run the command on the active container
<ul>
	<li>first lets see if there is an active container running - <strong>docker container ls</strong></li>
	<li>now run the container and command
<ul>
	<li><strong>docker exec -it <command></command></strong></li>
</ul>
</li>
</ul>
</li>
	<li><img class="alignnone size-full wp-image-1646" src="https://mohdnaeem.files.wordpress.com/2018/04/capture9.png" alt="Capture" width="1393" height="664" /></li>
	<li>This script from here - <strong><a href="https://testbucket786786.s3.amazonaws.com/docker/docker-installer.sh">https://testbucket786786.s3.amazonaws.com/docker/docker-installer.sh</a> </strong>will also install docker and docker-compose( to be used later) on a host
<ul>
	<li>wget https://testbucket786786.s3.amazonaws.com/docker/docker-installer.sh</li>
	<li>chmod +x docker-installer.sh</li>
	<li>./docker-installer.sh</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 